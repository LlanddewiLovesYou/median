(this.webpackJsonpmedian=this.webpackJsonpmedian||[]).push([[0],{156:function(e,t,a){e.exports=a(392)},161:function(e,t,a){},179:function(e,t,a){},184:function(e,t,a){},185:function(e,t,a){},186:function(e,t,a){},187:function(e,t,a){},188:function(e,t,a){},213:function(e,t){},231:function(e,t,a){},232:function(e,t,a){},389:function(e,t,a){},390:function(e,t,a){},391:function(e,t,a){},392:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(71),l=a.n(c),s=(a(161),a(8)),o=a.n(s),u=a(21),i=a(13),m=a(9),p=a(6),d=a(26),E=a.n(d),b=function(){return window.localStorage.getItem("MEDIAN_JWT")},f=r.a.createContext({currentUser:void 0,loggedIn:void 0,setCurrentUser:function(){},setLoggedIn:function(){}}),v=(a(179),function(){var e=Object(n.useContext)(f).currentUser;return r.a.createElement("div",{className:"masthead"},r.a.createElement(m.b,{to:"/posts",className:"masthead__title"},"Median"),r.a.createElement("div",{className:"masthead__login"},!e&&r.a.createElement(m.b,{to:"/signup",className:"button"},"Sign Up"),!e&&r.a.createElement(m.b,{to:"/login",className:"button"},"Log In"),e&&"Welcome, ".concat(e.userName),e&&"admin"===e.permissions&&r.a.createElement(m.b,{to:"/posts/create",className:"masthead__link"},"Create Post")))}),h=(a(184),function(e){var t=e.children,a=e.buttonType,n=e.type;return r.a.createElement("button",{type:n,className:"button button__"+a},t)}),g=(a(185),function(e){return r.a.createElement("div",{className:"landing-page"},r.a.createElement("div",{className:"landing-page__content"},r.a.createElement("div",{className:"header"},"Dive deeper on topics that matter to Ian."),r.a.createElement("div",{className:"sub-header"},r.a.createElement("u",null,"Med"),"ia related to ",r.a.createElement("u",null,"Ian"),"... ",r.a.createElement("u",null,"Median"),"."),r.a.createElement(m.b,{to:"/posts"},r.a.createElement(h,{buttonType:"transparent"},"Get Started"))))}),j=r.a.createContext({posts:[],getPosts:function(){}}),w=(a(186),function(e){var t=e.post;return r.a.createElement(m.b,{to:"/posts/".concat(t.id),className:"post-preview"},r.a.createElement("div",null,r.a.createElement("div",{className:"post-preview__author"},r.a.createElement("span",{className:"placeholder post-preview__placeholder"},"ID"),t.author),r.a.createElement("h1",null,t.title),r.a.createElement("h3",null,t.subtitle),r.a.createElement("div",{className:"post-preview__meta-data"},t.updatedAt?r.a.createElement("span",null,new Date(t.updatedAt).toDateString()):null,r.a.createElement("span",{className:"post-preview__separator"},"\u2022"),t.readTime?r.a.createElement("span",null,t.readTime,"m"):null)),r.a.createElement("img",{src:t.imageUrl,alt:""}))}),O=(a(187),function(){var e=Object(n.useContext)(j),t=e.posts,a=e.getPosts;return Object(n.useEffect)((function(){a()}),[a]),r.a.createElement("div",{className:"post-index-page"},t.map((function(e){return r.a.createElement(w,{post:e})})))}),N=(a(188),function(e){var t=e.post,a=t.updatedAt,n=t.readTime,c=t.author;return r.a.createElement("div",{className:"by-line"},r.a.createElement("span",{className:"by-line__placeholder"},"ID"),r.a.createElement("div",{className:"by-line__data"},r.a.createElement("div",null,c),r.a.createElement("div",{className:"by-line__data-secondline"},r.a.createElement("div",null,new Date(a).toDateString()),r.a.createElement("span",{className:"by-line__separator"},"\u2022"),r.a.createElement("div",null,n," min"))))}),_=a(152),y=a.n(_),S=(a(231),function(){var e=Object(n.useState)({title:"",subtitle:"",author:"",imageUrl:"",body:""}),t=Object(i.a)(e,2),a=t[0],c=t[1],l=function(e){return e.split("/")[2]}(Object(p.h)().pathname);return Object(n.useEffect)((function(){(function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.get("".concat("https://half-tinted-pluto.glitch.me/","/posts/").concat(l));case 2:t=e.sent,c(t.data[0]);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[l,c]),r.a.createElement("div",{className:"post"},r.a.createElement("h1",null,a.title),r.a.createElement("h3",{className:""},a.subtitle),a.author&&r.a.createElement(N,{post:a}),r.a.createElement("img",{src:a.imageUrl,alt:""}),r.a.createElement("div",null,y()(a.body)))}),x=(a(232),function(e){var t,a,c,l=e.type,s=Object(n.useState)(""),m=Object(i.a)(s,2),d=m[0],b=m[1],v=Object(n.useState)(""),g=Object(i.a)(v,2),j=g[0],w=g[1],O=Object(p.g)(),N=Object(n.useContext)(f),_=N.setCurrentUser,y=N.setLoggedIn;switch(l){case"login":t="Log In",a="Log In",c="".concat("https://half-tinted-pluto.glitch.me/","/users/login");break;case"signup":t="Create Account",a="Submit",c="".concat("https://half-tinted-pluto.glitch.me/","/users")}var S=function(){var e=Object(u.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,E.a.post(c,{userName:d,password:j});case 4:a=e.sent,console.log({user:a}),a.data&&(y(!0),_(a.data.currentUser),n=a.data.accessToken,window.localStorage.setItem("MEDIAN_JWT",n),O.push("/posts")),e.next=12;break;case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",e.t0.message);case 12:case"end":return e.stop()}var n}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"user-form"},r.a.createElement("form",{onSubmit:function(e){return S(e)}},r.a.createElement("div",null,t),r.a.createElement("label",{htmlFor:"username"},"Username",r.a.createElement("input",{type:"text",onChange:function(e){return b(e.target.value)},value:d})),r.a.createElement("label",{htmlFor:"password"},"Password",r.a.createElement("input",{type:"password",onChange:function(e){return w(e.target.value)},value:j})),r.a.createElement(h,{buttonType:"user",type:"submit"},a)))}),C=a(153),I=a(40),k=a(154),U=a.n(k),D=a(155),T=a.n(D),A=(a(388),a(389),function(e){var t=[],a=e.split(" ");return a.forEach((function(e,n){t.push(e.toLowerCase()),n!==a.length-1&&t.push("-")})),t.join("")}),L=function(e){var t=Object(n.useState)(I.EditorState.createEmpty()),a=Object(i.a)(t,2),c=a[0],l=a[1],s=Object(n.useState)(""),m=Object(i.a)(s,2),d=m[0],f=m[1],v=Object(n.useState)(""),g=Object(i.a)(v,2),j=g[0],w=g[1],O=Object(n.useState)(""),N=Object(i.a)(O,2),_=N[0],y=N[1],S=Object(p.g)(),x=function(e){var t=Object(I.convertToRaw)(e.getCurrentContent());return U()(t)},k=function(){var e=Object(u.a)(o.a.mark((function e(t,a){var n,r,c,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=x(a),r=T()(n),c=A(d),l={id:c,body:n,author:"Ian Del Duca",title:d,subtitle:j,imageUrl:_,wordCount:r},e.next=7,E.a.post("".concat("https://half-tinted-pluto.glitch.me/","/posts"),l,{headers:{Authorization:"bearer ".concat(b())}});case 7:S.push("/posts");case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return r.a.createElement("form",{onSubmit:function(e){return k(e,c)},className:"create-post-form"},r.a.createElement("div",{className:"title"},"Create a Blog Post"),r.a.createElement("div",{className:"create-post-form__inputs"},r.a.createElement("label",null,"Title:",r.a.createElement("input",{value:d,onChange:function(e){return f(e.target.value)}})),r.a.createElement("label",null,"Subtitle:",r.a.createElement("input",{value:j,onChange:function(e){return w(e.target.value)}})),r.a.createElement("label",null,"Image URL:",r.a.createElement("input",{value:_,onChange:function(e){return y(e.target.value)}}))),r.a.createElement("label",null,"Body:",r.a.createElement("div",{className:"create-post-form__border"},r.a.createElement(C.Editor,{editorState:c,onEditorStateChange:function(e){return l(e)}}))),r.a.createElement(h,{type:"submit",buttonType:"user"},"Submit"))},P=(a(390),function(){return r.a.createElement("div",null,r.a.createElement(L,null))}),M=(a(391),function(e){var t=e.accessible,a=e.path,n=e.redirect,c=e.children;return t?r.a.createElement(p.b,{path:a},c):r.a.createElement(p.a,{to:n})});var W=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(void 0),s=Object(i.a)(l,2),d=s[0],h=s[1],w=Object(n.useState)(!1),N=Object(i.a)(w,2),_=N[0],y=N[1],C=b(),I=Object(n.useCallback)(Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.get("".concat("https://half-tinted-pluto.glitch.me/","/posts"));case 2:t=e.sent,c(t.data);case 4:case"end":return e.stop()}}),e)}))),[c]),k=Object(n.useCallback)(function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.post("".concat("https://half-tinted-pluto.glitch.me/","/users/validate"),{accessToken:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]);return Object(n.useEffect)((function(){(function(){var e=Object(u.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(C);case 2:t=e.sent,a=t.data,C&&a?(y(!0),h(a)):y(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()})),r.a.createElement(m.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(f.Provider,{value:{currentUser:d,setCurrentUser:h,setLoggedIn:y,loggedIn:_}},r.a.createElement(v,null),r.a.createElement(j.Provider,{value:{posts:a,getPosts:I}},r.a.createElement(p.d,null,r.a.createElement(p.b,{exact:!0,path:"/"},r.a.createElement(g,null)),r.a.createElement(p.b,{exact:!0,path:"/median/posts"},r.a.createElement(O,null)),r.a.createElement(M,{path:"/posts/create",redirect:"/posts",accessible:_&&"admin"===(null===d||void 0===d?void 0:d.permissions)},r.a.createElement(P,null)),r.a.createElement(p.b,{path:"/posts/:id"},r.a.createElement(S,null)),r.a.createElement(M,{path:"/developement",redirect:"/posts",accessible:_&&"admin"===(null===d||void 0===d?void 0:d.permissions)},r.a.createElement(x,{type:"signup"})),r.a.createElement(p.b,{path:"/signup"},r.a.createElement(x,{type:"signup"})),r.a.createElement(p.b,{path:"/login"},r.a.createElement(x,{type:"login"})))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(W,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[156,1,2]]]);
//# sourceMappingURL=main.444aec7b.chunk.js.map