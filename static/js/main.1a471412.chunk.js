(this.webpackJsonpmedian=this.webpackJsonpmedian||[]).push([[0],{156:function(e,t,a){e.exports=a(392)},161:function(e,t,a){},179:function(e,t,a){},184:function(e,t,a){},185:function(e,t,a){},186:function(e,t,a){},187:function(e,t,a){},188:function(e,t,a){},360:function(e,t){},375:function(e,t,a){},376:function(e,t,a){},389:function(e,t,a){},390:function(e,t,a){},391:function(e,t,a){},392:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(71),s=a.n(c),o=(a(161),a(7)),l=a.n(o),u=a(15),i=a(8),m=a(10),p=a(6),d=a(20),v=a.n(d),b=function(){return window.localStorage.getItem("MEDIAN_JWT")},E=function(e){return void 0!==e&&"admin"===e.permissions},f=r.a.createContext({currentUser:void 0,loggedIn:void 0,setCurrentUser:function(){},setLoggedIn:function(){}}),h=(a(179),function(){var e=Object(n.useContext)(f).currentUser,t=E(e);return r.a.createElement("div",{className:"masthead"},r.a.createElement(m.b,{to:"/posts",className:"masthead__title"},"Median"),r.a.createElement("div",{className:"masthead__login"},!e&&r.a.createElement(m.b,{to:"/signup",className:"button"},"Sign Up"),!e&&r.a.createElement(m.b,{to:"/login",className:"button"},"Log In"),e&&"Welcome, ".concat(e.userName),e&&t&&r.a.createElement(m.b,{to:"/posts/create",className:"masthead__link"},"Create Post")))}),g=(a(184),function(e){var t=e.children,a=e.buttonType,n=e.type,c=e.onClick;return r.a.createElement("button",{type:n,className:"button button__"+a,onClick:c||function(){}},t)}),w=(a(185),function(e){return r.a.createElement("div",{className:"landing-page"},r.a.createElement("div",{className:"landing-page__content"},r.a.createElement("div",{className:"header"},"Dive deeper on topics that matter to Ian."),r.a.createElement("div",{className:"sub-header"},r.a.createElement("u",null,"Med"),"ia related to ",r.a.createElement("u",null,"Ian"),"... ",r.a.createElement("u",null,"Median"),"."),r.a.createElement(m.b,{to:"/posts"},r.a.createElement(g,{buttonType:"transparent"},"Get Started"))))}),j=r.a.createContext({posts:[],getPosts:function(){}}),O=(a(186),function(e){var t=e.post;return r.a.createElement(m.b,{to:"/posts/".concat(t.id),className:"post-preview"},r.a.createElement("div",null,r.a.createElement("div",{className:"post-preview__author"},r.a.createElement("span",{className:"placeholder post-preview__placeholder"},"ID"),t.author),r.a.createElement("h1",null,t.title),r.a.createElement("h3",null,t.subtitle),r.a.createElement("div",{className:"post-preview__meta-data"},t.updatedAt?r.a.createElement("span",null,new Date(t.updatedAt).toDateString()):null,r.a.createElement("span",{className:"post-preview__separator"},"\u2022"),t.readTime?r.a.createElement("span",null,t.readTime,"m"):null)),r.a.createElement("img",{src:t.imageUrl,alt:""}))}),N=(a(187),function(){var e=Object(n.useContext)(j),t=e.posts,a=e.getPosts;return Object(n.useEffect)((function(){a()}),[a]),r.a.createElement("div",{className:"post-index-page"},t.map((function(e){return r.a.createElement(O,{post:e})})))}),y=(a(188),function(e){var t,a,c;switch(e.type){case"login":t="Log In",a="Log In",c="".concat("http://localhost:5000","/users/login");break;case"signup":t="Create Account",a="Submit",c="".concat("http://localhost:5000","/users")}var s=function(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),r=a[0],c=a[1],s=Object(n.useState)(""),o=Object(i.a)(s,2),m=o[0],d=o[1],b=Object(n.useState)(void 0),E=Object(i.a)(b,2),h=E[0],g=E[1],w=Object(p.g)(),j=Object(n.useContext)(f),O=j.setCurrentUser,N=j.setLoggedIn,y=Object(n.useCallback)(function(){var t=Object(u.a)(l.a.mark((function t(a){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),g(void 0),t.prev=2,t.next=5,v.a.post(e,{userName:r,password:m});case 5:(n=t.sent).data&&(N(!0),O(n.data.currentUser),c=n.data.accessToken,window.localStorage.setItem("MEDIAN_JWT",c),w.push("/posts")),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),401===t.t0.response.status?g("Invalid Username or Password"):g("Something went wrong...");case 12:case"end":return t.stop()}var c}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}(),[g,N,O,w,m,e,r]);return Object(n.useMemo)((function(){return{onSubmit:y,error:h,setUserName:c,userName:r,setPassword:d,password:m}}),[y,h,c,r,d,m])}(c),o=s.onSubmit,m=s.error,d=s.setUserName,b=s.userName,E=s.setPassword,h=s.password;return r.a.createElement("div",{className:"user-form"},r.a.createElement("form",{onSubmit:function(e){return o(e)}},r.a.createElement("div",null,t),r.a.createElement("div",{className:"error ".concat(m?"visible":null)},m),r.a.createElement("label",{htmlFor:"username"},"Username",r.a.createElement("input",{type:"text",onChange:function(e){return d(e.target.value)},value:b})),r.a.createElement("label",{htmlFor:"password"},"Password",r.a.createElement("input",{type:"password",onChange:function(e){return E(e.target.value)},value:h})),r.a.createElement(g,{buttonType:"user",type:"submit"},a)))}),x=r.a.createContext({setPostPreview:function(){}}),C=a(152),S=a(40),_=a(153),I=a.n(_),k=a(154),D=a.n(k),P=(a(374),a(375),function(e){var t=[],a=e.split(" ");return a.forEach((function(e,n){t.push(e.toLowerCase()),n!==a.length-1&&t.push("-")})),t.join("")}),U=function(e){var t=Object(n.useState)(S.EditorState.createEmpty()),a=Object(i.a)(t,2),c=a[0],s=a[1],o=Object(n.useState)(""),m=Object(i.a)(o,2),d=m[0],E=m[1],f=Object(n.useState)(""),h=Object(i.a)(f,2),w=h[0],j=h[1],O=Object(n.useState)(""),N=Object(i.a)(O,2),y=N[0],_=N[1],k=Object(p.g)(),U=Object(n.useContext)(x).setPostPreview,T=function(e){var t=Object(S.convertToRaw)(e.getCurrentContent());return I()(t)},A=function(){var e=Object(u.a)(l.a.mark((function e(t,a){var n,r,c,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=T(a),r=D()(n),c=P(d),s={id:c,body:n,author:"Ian Del Duca",claps:0,title:d,subtitle:w,imageUrl:y,wordCount:r},e.next=7,v.a.post("".concat("http://localhost:5000","/posts"),s,{headers:{Authorization:"bearer ".concat(b())}});case 7:k.push("/posts");case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(e){return A(e,c)},className:"create-post-form"},r.a.createElement("div",{className:"title"},"Create a Blog Post"),r.a.createElement("div",{className:"create-post-form__inputs"},r.a.createElement("label",null,"Title:",r.a.createElement("input",{value:d,onChange:function(e){return E(e.target.value)}})),r.a.createElement("label",null,"Subtitle:",r.a.createElement("input",{value:w,onChange:function(e){return j(e.target.value)}})),r.a.createElement("label",null,"Image URL:",r.a.createElement("input",{value:y,onChange:function(e){return _(e.target.value)}}))),r.a.createElement("label",null,"Body:",r.a.createElement("div",{className:"create-post-form__border"},r.a.createElement(C.Editor,{editorState:c,onEditorStateChange:function(e){return s(e)}}))),r.a.createElement("div",{className:"buttons"},r.a.createElement(g,{buttonType:"transparent",onClick:function(e){return function(e){e.preventDefault();var t=T(c),a={id:P(d),body:t,author:"Ian Del Duca",title:d,subtitle:w,imageUrl:y,readTime:"XXm",updatedAt:new Date(Date.now())};U(a)}(e)}},"Preview"),r.a.createElement(g,{type:"submit",buttonType:"user"},"Submit"))))},T=(a(376),function(e){var t=e.post,a=t.updatedAt,n=t.readTime,c=t.author;return r.a.createElement("div",{className:"by-line"},r.a.createElement("span",{className:"by-line__placeholder"},"ID"),r.a.createElement("div",{className:"by-line__data"},r.a.createElement("div",null,c),r.a.createElement("div",{className:"by-line__data-secondline"},r.a.createElement("div",null,new Date(a).toDateString()),r.a.createElement("span",{className:"by-line__separator"},"\u2022"),r.a.createElement("div",null,n," min"))))}),A=a(155),L=a.n(A),M=(a(389),function(e){var t=e.post,a=Object(n.useContext)(f).currentUser,c=Object(n.useState)(0),s=Object(i.a)(c,2),o=s[0],m=s[1],p=E(a),d=b();Object(n.useEffect)((function(){m(t.claps)}),[t]);var h=function(){var e=Object(u.a)(l.a.mark((function e(a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,v.a.delete("".concat("http://localhost:5000","/posts/").concat(t.id),{headers:{authorization:"bearer ".concat(d)}});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(u.a)(l.a.mark((function e(a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),m(o+1),e.next=4,v.a.post("".concat("http://localhost:5000","/claps/").concat(t.id));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"post"},r.a.createElement("h1",null,t.title),r.a.createElement("h3",{className:""},t.subtitle),t.author&&r.a.createElement(T,{post:t}),r.a.createElement("img",{src:t.imageUrl,alt:""}),r.a.createElement("div",null,L()(t.body)),r.a.createElement("div",{className:"claps",onClick:function(e){return w(e)}},r.a.createElement("img",{src:"https://topmediumstories.com/clap.png",alt:""}),r.a.createElement("span",null,o)),p&&r.a.createElement(g,{buttonType:"delete",onClick:function(e){return h(e)}},"Delete Post"))}),W=(a(390),function(){var e=Object(n.useState)(void 0),t=Object(i.a)(e,2),a=t[0],c=t[1];return r.a.createElement("div",{className:"create-post-page"},r.a.createElement(x.Provider,{value:{setPostPreview:c}},a&&r.a.createElement("div",{className:"preview"},r.a.createElement("span",{className:"prev-text"},"PREVIEW"),r.a.createElement(M,{post:a})),r.a.createElement(U,null)))}),B=(a(391),function(e){var t=e.accessible,a=e.path,n=e.redirect,c=e.children;return t?r.a.createElement(p.b,{path:a},c):r.a.createElement(p.a,{to:n})}),J=function(){var e=Object(n.useState)({title:"",subtitle:"",author:"",imageUrl:"",body:""}),t=Object(i.a)(e,2),a=t[0],c=t[1],s=function(e){return e.split("/")[2]}(Object(p.h)().pathname);return Object(n.useEffect)((function(){(function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("".concat("http://localhost:5000","/posts/").concat(s));case 2:t=e.sent,c(t.data[0]);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[s,c]),r.a.createElement("div",null,a?r.a.createElement(M,{post:a}):r.a.createElement("img",{src:"https://media0.giphy.com/media/3oEjI6SIIHBdRxXI40/giphy.gif"}))};var R=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(void 0),o=Object(i.a)(s,2),d=o[0],E=o[1],g=Object(n.useState)(!1),O=Object(i.a)(g,2),x=O[0],C=O[1],S=b(),_=Object(n.useCallback)(Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("".concat("http://localhost:5000","/posts"));case 2:t=e.sent,c(t.data);case 4:case"end":return e.stop()}}),e)}))),[c]),I=Object(n.useCallback)(function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post("".concat("http://localhost:5000","/users/validate"),{accessToken:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]);return Object(n.useEffect)((function(){(function(){var e=Object(u.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(S);case 2:t=e.sent,a=t.data,S&&a?(C(!0),E(a)):C(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[C,E,I,S]),r.a.createElement(m.a,{basename:"/median"},r.a.createElement("div",{className:"App"},r.a.createElement(f.Provider,{value:{currentUser:d,setCurrentUser:E,setLoggedIn:C,loggedIn:x}},r.a.createElement(h,null),r.a.createElement(j.Provider,{value:{posts:a,getPosts:_}},r.a.createElement(p.d,null,r.a.createElement(p.b,{exact:!0,path:"/"},r.a.createElement(w,null)),r.a.createElement(p.b,{exact:!0,path:"/posts"},r.a.createElement(N,null)),r.a.createElement(B,{path:"/posts/create",redirect:"/posts",accessible:x&&"admin"===(null===d||void 0===d?void 0:d.permissions)},r.a.createElement(W,null)),r.a.createElement(p.b,{path:"/posts/:id"},r.a.createElement(J,null)),r.a.createElement(B,{path:"/developement",redirect:"/posts",accessible:x&&"admin"===(null===d||void 0===d?void 0:d.permissions)},r.a.createElement(y,{type:"signup"})),r.a.createElement(p.b,{path:"/signup"},r.a.createElement(y,{type:"signup"})),r.a.createElement(p.b,{path:"/login"},r.a.createElement(y,{type:"login"})))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(R,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[156,1,2]]]);
//# sourceMappingURL=main.1a471412.chunk.js.map