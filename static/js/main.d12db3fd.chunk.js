(this.webpackJsonpmedian=this.webpackJsonpmedian||[]).push([[0],{156:function(e,t,a){e.exports=a(394)},161:function(e,t,a){},179:function(e,t,a){},184:function(e,t,a){},185:function(e,t,a){},186:function(e,t,a){},187:function(e,t,a){},188:function(e,t,a){},360:function(e,t){},375:function(e,t,a){},376:function(e,t,a){},389:function(e,t,a){},390:function(e,t,a){},391:function(e,t,a){},392:function(e,t,a){},393:function(e,t,a){},394:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(71),s=a.n(c),o=(a(161),a(6)),l=a.n(o),u=a(11),i=a(7),m=a(10),p=a(8),d=a(12),v=a.n(d),f=function(){return window.localStorage.getItem("MEDIAN_JWT")},E=function(e){return void 0!==e&&"admin"===e.permissions},b=r.a.createContext({currentUser:void 0,loggedIn:void 0,setCurrentUser:function(){},setLoggedIn:function(){}}),h=(a(179),function(){var e=Object(n.useContext)(b).currentUser,t=E(e);return r.a.createElement("div",{className:"masthead"},r.a.createElement(m.b,{to:"/posts",className:"masthead__title"},"Median"),r.a.createElement("div",{className:"masthead__login"},!e&&r.a.createElement(m.b,{to:"/signup",className:"button"},"Sign Up"),!e&&r.a.createElement(m.b,{to:"/login",className:"button"},"Log In"),e&&"Welcome, ".concat(e.userName),e&&t&&r.a.createElement(m.b,{to:"/posts/create",className:"masthead__link"},"Write")))}),g=(a(184),function(e){var t=e.children,a=e.buttonType,n=e.type,c=e.onClick;return r.a.createElement("button",{type:n,className:"button button__"+a,onClick:c||function(){}},t)}),j=(a(185),function(e){return r.a.createElement("div",{className:"landing-page"},r.a.createElement("div",{className:"landing-page__content"},r.a.createElement("div",{className:"header"},"Dive deeper on topics that matter to Ian."),r.a.createElement("div",{className:"sub-header"},r.a.createElement("u",null,"Med"),"ia related to ",r.a.createElement("u",null,"Ian"),"... ",r.a.createElement("u",null,"Median"),"."),r.a.createElement(m.b,{to:"/posts"},r.a.createElement(g,{buttonType:"transparent"},"Get Started"))))}),O=r.a.createContext({posts:[],getPosts:function(){}}),w=(a(186),function(e){var t=e.post;return r.a.createElement(m.b,{to:"/posts/".concat(t.id),className:"post-preview"},r.a.createElement("div",null,r.a.createElement("div",{className:"post-preview__author"},r.a.createElement("img",{src:"https://recap-project.eu/wp-content/uploads/2017/02/default-user-300x300.jpg",alt:"",className:"post-preview__avatar"}),t.author),r.a.createElement("h1",null,t.title),r.a.createElement("h3",null,t.subtitle),r.a.createElement("div",{className:"post-preview__meta-data"},t.updatedAt?r.a.createElement("span",null,new Date(t.updatedAt).toDateString()):null,r.a.createElement("span",{className:"post-preview__separator"},"\u2022"),t.readTime?r.a.createElement("span",null,t.readTime,"m"):null)),r.a.createElement("img",{src:t.imageUrl,alt:"",className:"thumbnail"}))}),N=(a(187),function(){var e=Object(n.useContext)(O),t=e.posts,a=e.getPosts;return Object(n.useEffect)((function(){a()}),[a]),r.a.createElement("div",{className:"post-index-page"},t.map((function(e){return r.a.createElement("div",{className:"preview"},r.a.createElement(w,{post:e}))})))}),x=(a(188),function(e){var t,a,c;switch(e.type){case"login":t="Log In",a="Log In",c="".concat("https://half-tinted-pluto.glitch.me/","/users/login");break;case"signup":t="Create Account",a="Submit",c="".concat("https://half-tinted-pluto.glitch.me/","/users")}var s=function(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),r=a[0],c=a[1],s=Object(n.useState)(""),o=Object(i.a)(s,2),m=o[0],d=o[1],f=Object(n.useState)(void 0),E=Object(i.a)(f,2),h=E[0],g=E[1],j=Object(p.g)(),O=Object(n.useContext)(b),w=O.setCurrentUser,N=O.setLoggedIn,x=Object(n.useCallback)(function(){var t=Object(u.a)(l.a.mark((function t(a){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),g(void 0),t.prev=2,t.next=5,v.a.post(e,{userName:r,password:m});case 5:(n=t.sent).data&&(N(!0),w(n.data.currentUser),c=n.data.accessToken,window.localStorage.setItem("MEDIAN_JWT",c),j.push("/posts")),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),401===t.t0.response.status?g("Invalid Username or Password"):g("Something went wrong...");case 12:case"end":return t.stop()}var c}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}(),[g,N,w,j,m,e,r]);return Object(n.useMemo)((function(){return{onSubmit:x,error:h,setUserName:c,userName:r,setPassword:d,password:m}}),[x,h,c,r,d,m])}(c),o=s.onSubmit,m=s.error,d=s.setUserName,f=s.userName,E=s.setPassword,h=s.password;return r.a.createElement("div",{className:"user-form"},r.a.createElement("form",{onSubmit:function(e){return o(e)}},r.a.createElement("div",null,t),r.a.createElement("div",{className:"error ".concat(m?"visible":null)},m),r.a.createElement("label",{htmlFor:"username"},"Username",r.a.createElement("input",{type:"text",onChange:function(e){return d(e.target.value)},value:f})),r.a.createElement("label",{htmlFor:"password"},"Password",r.a.createElement("input",{type:"password",onChange:function(e){return E(e.target.value)},value:h})),r.a.createElement(g,{buttonType:"user",type:"submit"},a)))}),C=r.a.createContext({setPostPreview:function(){}}),y=a(152),S=a(40),_=a(153),k=a.n(_),I=a(154),U=a.n(I),P=(a(374),a(375),function(e){var t=[],a=e.split(" ");return a.forEach((function(e,n){t.push(e.toLowerCase()),n!==a.length-1&&t.push("-")})),t.join("")}),D=function(e){var t=Object(n.useState)(S.EditorState.createEmpty()),a=Object(i.a)(t,2),c=a[0],s=a[1],o=Object(n.useState)(""),m=Object(i.a)(o,2),d=m[0],E=m[1],h=Object(n.useState)(""),j=Object(i.a)(h,2),O=j[0],w=j[1],N=Object(n.useState)(""),x=Object(i.a)(N,2),_=x[0],I=x[1],D=Object(p.g)(),T=Object(n.useContext)(C).setPostPreview,A=Object(n.useContext)(b).currentUser,W=function(e){var t=Object(S.convertToRaw)(e.getCurrentContent());return k()(t)},L=function(){var e=Object(u.a)(l.a.mark((function e(t,a){var n,r,c,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=W(a),r=U()(n),c=P(d),s={id:c,body:n,author:A.userName,claps:0,title:d,subtitle:O,imageUrl:_,wordCount:r},e.next=7,v.a.post("".concat("https://half-tinted-pluto.glitch.me/","/posts"),s,{headers:{Authorization:"bearer ".concat(f())}});case 7:D.push("/posts");case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(e){return L(e,c)},className:"create-post-form"},r.a.createElement("div",{className:"title"},"Create a Blog Post"),r.a.createElement("div",{className:"create-post-form__inputs"},r.a.createElement("label",null,"Title:",r.a.createElement("input",{value:d,onChange:function(e){return E(e.target.value)}})),r.a.createElement("label",null,"Subtitle:",r.a.createElement("input",{value:O,onChange:function(e){return w(e.target.value)}})),r.a.createElement("label",null,"Image URL:",r.a.createElement("input",{value:_,onChange:function(e){return I(e.target.value)}}))),r.a.createElement("label",null,"Body:",r.a.createElement("div",{className:"create-post-form__border"},r.a.createElement(y.Editor,{editorState:c,onEditorStateChange:function(e){return s(e)}}))),r.a.createElement("div",{className:"buttons"},r.a.createElement(g,{buttonType:"transparent",onClick:function(e){return function(e){e.preventDefault();var t=W(c),a={id:P(d),body:t,author:A.userName,title:d,subtitle:O,imageUrl:_,readTime:"XXm",updatedAt:new Date(Date.now())};T(a)}(e)}},"Preview"),r.a.createElement(g,{type:"submit",buttonType:"user"},"Submit"))))},T=(a(376),function(e){var t=e.post,a=t.updatedAt,n=t.readTime,c=t.author;return r.a.createElement("div",{className:"by-line"},r.a.createElement("img",{src:"https://recap-project.eu/wp-content/uploads/2017/02/default-user-300x300.jpg",alt:"",className:"by-line__avatar"}),r.a.createElement("div",{className:"by-line__data"},r.a.createElement("div",null,c),r.a.createElement("div",{className:"by-line__data-secondline"},r.a.createElement("div",null,new Date(a).toDateString()),r.a.createElement("span",{className:"by-line__separator"},"\u2022"),r.a.createElement("div",null,n," min"))))}),A=a(155),W=a.n(A),L=(a(389),r.a.createContext({comments:[],getComments:function(){},commentsOpen:!1,setCommentsOpen:function(){}})),M=function(e){var t=e.post,a=Object(n.useContext)(b).currentUser,c=Object(n.useContext)(L),s=c.comments,o=c.setCommentsOpen,m=Object(n.useState)(0),p=Object(i.a)(m,2),d=p[0],h=p[1],j=E(a),O=f();Object(n.useEffect)((function(){h(t.claps)}),[t]);var w=function(){var e=Object(u.a)(l.a.mark((function e(a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,v.a.delete("".concat("https://half-tinted-pluto.glitch.me/","/posts/").concat(t.id),{headers:{authorization:"bearer ".concat(O)}});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(u.a)(l.a.mark((function e(a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),h(d+1),e.next=4,v.a.post("".concat("https://half-tinted-pluto.glitch.me/","/claps/").concat(t.id));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"post"},r.a.createElement("h1",null,t.title),r.a.createElement("h3",{className:""},t.subtitle),t.author&&r.a.createElement(T,{post:t}),r.a.createElement("img",{src:t.imageUrl,alt:"",className:"post__image"}),r.a.createElement("div",null,W()(t.body)),r.a.createElement("div",{className:"engagment"},r.a.createElement("div",{className:"claps",onClick:function(e){return N(e)}},r.a.createElement("img",{src:"https://topmediumstories.com/clap.png",alt:""}),r.a.createElement("span",null,d)),r.a.createElement("div",{className:"comments",onClick:function(){return o(!0)}},r.a.createElement("img",{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSrnRVoTTYHiFVSdYE48UCxzveyW9EMPFgHWA&usqp=CAU",alt:""}),r.a.createElement("span",null,s.length))),j&&r.a.createElement(g,{buttonType:"delete",onClick:function(e){return w(e)}},"Delete Post"))},R=(a(390),function(){var e=Object(n.useState)(void 0),t=Object(i.a)(e,2),a=t[0],c=t[1];return r.a.createElement("div",{className:"create-post-page"},r.a.createElement(C.Provider,{value:{setPostPreview:c}},a&&r.a.createElement("div",{className:"preview"},r.a.createElement("span",{className:"prev-text"},"PREVIEW"),r.a.createElement(M,{post:a})),r.a.createElement(D,null)))}),B=function(e){var t=e.accessible,a=e.path,n=e.redirect,c=e.children;return t?r.a.createElement(p.b,{path:a},c):r.a.createElement(p.a,{to:n})},F=function(e){return e.split("/")[2]},J=function(){var e=Object(n.useState)({title:"",subtitle:"",author:"",imageUrl:"",body:""}),t=Object(i.a)(e,2),a=t[0],c=t[1],s=Object(p.h)().pathname,o=F(s);return Object(n.useEffect)((function(){(function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("".concat("https://half-tinted-pluto.glitch.me/","/posts/").concat(o));case 2:t=e.sent,c(t.data[0]);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[o,c]),r.a.createElement("div",null,a?r.a.createElement(M,{post:a}):r.a.createElement("img",{src:"https://media0.giphy.com/media/3oEjI6SIIHBdRxXI40/giphy.gif"}))},z=(a(391),function(e){var t=e.comment;return r.a.createElement("div",{className:"comment"},r.a.createElement("div",{className:"username"},r.a.createElement("img",{src:"https://recap-project.eu/wp-content/uploads/2017/02/default-user-300x300.jpg",alt:"",className:"avatar"}),r.a.createElement("div",null,t.user.userName," ",r.a.createElement("div",null,new Date(t.updatedAt).toDateString()))),r.a.createElement("div",{className:"text"},t.text))}),H=(a(392),function(){var e=Object(n.useContext)(L),t=e.comments,a=e.getComments,c=e.commentsOpen,s=e.setCommentsOpen,o=Object(n.useState)(""),m=Object(i.a)(o,2),d=m[0],f=m[1],E=Object(n.useContext)(b),h=E.loggedIn,g=E.currentUser,j=Object(p.h)().pathname,O=F(j);Object(n.useEffect)((function(){a(O)}),[a,O]);var w=function(){var e=Object(u.a)(l.a.mark((function e(a){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!h||13!==a.keyCode){e.next=6;break}return e.next=3,v.a.post("".concat("https://half-tinted-pluto.glitch.me/","/comments/").concat(O),{userId:g._id,text:d});case 3:n=e.sent,f(""),t.shift(n.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:c?"comment-section enter":"comment-section"},r.a.createElement("div",{className:"header"},r.a.createElement("div",null,"Responses ","(".concat(t.length,")"),":"),r.a.createElement("img",{src:"https://www.materialui.co/materialIcons/navigation/close_black_256x256.png",alt:"",className:"close",onClick:function(){s(!1)}})),r.a.createElement("input",{placeholder:"What are your thoughts?",onChange:function(e){return f(e.target.value)},onKeyDown:function(e){return w(e)},value:d}),t&&r.a.createElement("div",{className:"comments"},t.map((function(e){return r.a.createElement(z,{comment:e})}))))});a(393);var V=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)([]),o=Object(i.a)(s,2),d=o[0],E=o[1],g=Object(n.useState)(!1),w=Object(i.a)(g,2),C=w[0],y=w[1],S=Object(n.useState)(void 0),_=Object(i.a)(S,2),k=_[0],I=_[1],U=Object(n.useState)(!1),P=Object(i.a)(U,2),D=P[0],T=P[1],A=f(),W=Object(n.useCallback)(Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("".concat("https://half-tinted-pluto.glitch.me/","/posts"));case 2:t=e.sent,c(t.data);case 4:case"end":return e.stop()}}),e)}))),[c]),M=Object(n.useCallback)(function(){var e=Object(u.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("".concat("https://half-tinted-pluto.glitch.me/","/comments/").concat(t));case 2:a=e.sent,E(a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[E,d]),F=Object(n.useCallback)(function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post("".concat("https://half-tinted-pluto.glitch.me/","/users/validate"),{accessToken:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]);return Object(n.useEffect)((function(){(function(){var e=Object(u.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F(A);case 2:t=e.sent,a=t.data,A&&a?(T(!0),I(a)):T(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[T,I,F,A]),r.a.createElement(m.a,{basename:"/median"},r.a.createElement("div",{className:"App"},r.a.createElement(b.Provider,{value:{currentUser:k,setCurrentUser:I,setLoggedIn:T,loggedIn:D}},r.a.createElement(L.Provider,{value:{comments:d,getComments:M,commentsOpen:C,setCommentsOpen:y}},r.a.createElement(H,null),r.a.createElement(h,null),r.a.createElement(O.Provider,{value:{posts:a,getPosts:W}},r.a.createElement(p.d,null,r.a.createElement(p.b,{exact:!0,path:"/"},r.a.createElement(j,null)),r.a.createElement(p.b,{exact:!0,path:"/posts"},r.a.createElement(N,null)),r.a.createElement(B,{path:"/posts/create",redirect:"/posts",accessible:D&&"admin"===(null===k||void 0===k?void 0:k.permissions)},r.a.createElement(R,null)),r.a.createElement(p.b,{path:"/posts/:id"},r.a.createElement(J,null)),r.a.createElement(B,{path:"/developement",redirect:"/posts",accessible:D&&"admin"===(null===k||void 0===k?void 0:k.permissions)},r.a.createElement(x,{type:"signup"})),r.a.createElement(p.b,{path:"/development"},r.a.createElement(H,null)),r.a.createElement(p.b,{path:"/signup"},r.a.createElement(x,{type:"signup"})),r.a.createElement(p.b,{path:"/login"},r.a.createElement(x,{type:"login"}))))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(V,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[156,1,2]]]);
//# sourceMappingURL=main.d12db3fd.chunk.js.map